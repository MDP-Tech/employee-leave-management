<!DOCTYPE html>
<html lang="en" data-layout="topnav" data-topbar-color="light" data-menu-color="light">

<head>
    <meta charset="utf-8" />
    <title>Employee Profile | Shiftwave</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="A fully responsive admin theme which can be used to build CRM, CMS,ERP etc." name="description" />
    <meta content="Techzaa" name="author" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico">

    <!-- Daterangepicker css -->
    <link rel="stylesheet" href="/assets/vendor/daterangepicker/daterangepicker.css">

    <!-- Vector Map css -->
    <link rel="stylesheet" href="/assets/vendor/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.css">

    <!-- Theme Config Js -->
    <script src="/assets/js/config.js"></script>

    <!-- App css -->
    <link href="/assets/css/app.min.css" rel="stylesheet" type="text/css" id="app-style" />

    <!-- Icons css -->
    <link href="/assets/css/icons.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <!-- Begin page -->
    <div class="wrapper">

       
        
       <%- include('../includes/admin-header')%>
       
        <!-- ============================================================== -->
        <!-- Start Page Content here -->
        <!-- ============================================================== -->

        <div class="content-page">
            <div class="content">
        
                <!-- Start Content-->
                <div class="container-fluid">
        
                    <!-- start page title -->
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="profile-bg-picture"
                                style="background-image:url('/assets/images/bg-profile.jpg')">
                                <span class="picture-bg-overlay"></span>
                                <!-- overlay -->
                            </div>
                            <!-- meta -->
                            <div class="profile-user-box">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="profile-user-img"><img src="/assets/images/users/avatar-1.jpg" alt=""
                                                class="avatar-lg rounded-circle"></div>
                                        <div class="">
                                            <h4 class="mt-4 fs-17 ellipsis"><%= admin_name %></h4>
                                            <p class="font-13"> Tetser</p>
                                            
                                        </div>
                                    </div>
                                    <!-- <div class="col-sm-6">
                                        <div class="d-flex justify-content-end align-items-center gap-2">
                                            <button type="button" class="btn btn-soft-danger">
                                                <i class="ri-settings-2-line align-text-bottom me-1 fs-16 lh-1"></i>
                                                Edit Profile
                                            </button>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                            <!--/ meta -->
                        </div>
                    </div>
                    <!-- end row -->
        
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="card p-0">
                                <div class="card-body p-0">
                                    <div class="profile-content">
                                        <ul class="nav nav-underline nav-justified gap-0">
                                            <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab"
                                                    data-bs-target="#aboutme" type="button" role="tab"
                                                    aria-controls="home" aria-selected="true" href="#aboutme">About</a>
                                            </li>
                                           
                                            <li class="nav-item"><a class="nav-link" data-bs-toggle="tab"
                                                    data-bs-target="#edit-profile" type="button" role="tab"
                                                    aria-controls="home" aria-selected="true"
                                                    href="#edit-profile">Settings</a></li>
                                        
                                        </ul>
                                        <% employee_details.forEach(employee => {%>
                                        <div class="tab-content m-0 p-4">
                                            <div class="tab-pane active" id="aboutme" role="tabpanel"
                                                aria-labelledby="home-tab" tabindex="0">
                                                <div class="profile-desk">
                                                    
                                                   
                                                  
        
                                                    <h5 class="mt-2 fs-17 text-dark">Contact Information</h5>
                                                    <table class="table table-condensed mb-0 border-top">
                                                        <tbody>
                                                           
                                                            <tr>
                                                                <th scope="row">Email</th>
                                                                <td>
                                                                    <a href="" class="ng-binding">
                                                                        <%= employee.email %>
                                                                    </a>
                                                                </td>
                                                            </tr>
        
                                                            <tr>
                                                                <th scope="row">Phone</th>
                                                                <td class="ng-binding"> <%= employee.phone_number %></td>
                                                            </tr>
                                                            
                                                            <!-- <tr>
                                                                <th scope="row">Employee ID</th>
                                                                <td class="ng-binding"> <%= employee_id %></td>
                                                            </tr> -->
                                                            <tr>
                                                                <th scope="row">Experience</th>
                                                                <td class="ng-binding"> <%= employee.experience %></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div> <!-- end profile-desk -->
                                            </div> <!-- about-me -->
        
                                            

            
                                            <!-- settings -->
                                            <div id="edit-profile" class="tab-pane">
                                                <div class="user-profile-content">
                                                    <form>
                                                        <div class="alert alert-info text-bg-info border-0" id="sucess_message" role="alert"
                                                                style="display: none;">
                                                                <strong>Info - </strong> A simple info alertâ€”check it out!
                                                            </div>
                                                        <div class="row row-cols-sm-2 row-cols-1">
                                                            <div class="mb-2">
                                                                <label class="form-label" for="FullName">Full
                                                                    Name</label>
                                                                <input type="text" value="<%= employee.name %>" id="FullName"
                                                                    class="form-control" readonly>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label class="form-label" for="Email">Email</label>
                                                                <input type="email" value="<%= employee.email %>"
                                                                    id="Email" class="form-control" readonly>
                                                            </div>
                                                           
                                                            
                                                            
                                                            <div class="mb-3">
                                                                <label for="password" class="form-label">New Password</label>
                                                                <div class="input-group input-group-merge">
                                                                    <input type="password" id="password" class="form-control" placeholder="Enter your password" maxlength="15">
                                                                    <div class="input-group-text" data-password="false">
                                                                        <span class="password-eye" data-target="password"></span> <!-- Use any suitable eye icon here -->
                                                                    </div>
                                                                </div>
                                                                <div class="text-danger" id="passwordError"></div>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label for="re-password" class="form-label">Confirm Password</label>
                                                                <div class="input-group input-group-merge">
                                                                    <input type="password" id="re-password" class="form-control" placeholder="Enter your password" maxlength="15">
                                                                    <div class="input-group-text" data-password="false">
                                                                        <span class="password-eye" data-target="re-password"></span> <!-- Use any suitable eye icon here -->
                                                                    </div>
                                                                </div>
                                                                <div class="text-danger" id="rePasswordError"></div>
                                                            </div>
                                                           
                                                        </div>
                                                        <button class="btn btn-primary" id="button" type="submit"><i
                                                                class="ri-save-line me-1 fs-16 lh-1"></i> Save</button>
                                                    </form>
                                                </div>
                                            </div>
                                            <% } )%>
        
                                            <!-- profile -->
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end page title -->
        
                </div>
                <!-- end row -->
        
            </div>
            <!-- container -->
        
        </div>

        <!-- ============================================================== -->
        <!-- End Page content -->
        <!-- ============================================================== -->
        <%- include('../includes/employee-footer')%>
    </div>
    <!-- END wrapper -->

    <!-- Theme Settings -->
    <%- include('../includes/admin-theme-settings')%> 
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <script>
        $(document).ready(function () {
     
            $(".password-eye").on("click", function () {
        var targetId = $(this).data("target");
        var targetField = $("#" + targetId);
        var fieldType = targetField.attr("type");

        if (fieldType === "password") {
            targetField.attr("type", "text");
        } else {
            targetField.attr("type", "password");
        }
    });
     
         $("#button").on('click', function (event) {

            $('#sucess_message').hide();
            $("#rePasswordError").text("");
            $("#passwordError").text("").show()
      
            event.preventDefault();
       
             var password = $("#password").val();
             var re_password = $("#re-password").val();
             isValid=true

            
            if (password == '') {
        $("#passwordError").text("Please Enter Your New Password").show();
        isValid = false;

    }
    if (isValid) {
        if (password.length < 8) {
                $("#passwordError").text("Password must be at least 8 characters long").show();
                isValid = false;
            } else if (!/\d/.test(password)) {
                $("#passwordError").text("Password must contain at least one digit").show();
                isValid = false;
            } else if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
                $("#passwordError").text("Password must contain at least one special character").show();
                isValid = false;
            } 
    }
    if(re_password == ''){
        $("#rePasswordError").text("Please Enter Confirm Password ").show();
        isValid = false;

    }
   if (isValid) {

    if (password !== re_password) {
            $("#rePasswordError").text("Passwords do not match").show();
            $("#passwordError").text("Passwords do not match").show();
            isValid = false;
        }
    
   }

   if (isValid) {

    event.preventDefault();

                          $.ajax({
                             type: 'POST',
                             dataType: "json",
                             data: { password:password,re_password:re_password },
                             url: '/employees/updatepassword',
                             success: function (response) {
                                 if (response.status == 'Sucessfully Updated') {
                                    
                                    $('#sucess_message').text(response.status);
                                    $('#sucess_message').show()
                                     $("#password").val('');
                                     $("#re-password").val('');
                                     $("#rePasswordError").text("");
                                     $("#passwordError").text("");
                                     setTimeout(function () {
                                        $('#sucess_message').hide();
                                    }, 3000); 
                                 } else {
                                     
                                    $('#sucess_message').text(response.status);
                                     
                                 }
                             },
                             error: function (xhr, status, error) {
                                 console.log("AJAX Error:", error);
                             }
                         });
    
   }
    
    
  
     
        
 


        
     
   
     
                         
   

     
                     
                    
                 
                 
                 });
             });
             </script> 
    <!-- <script>




    //     $(document).ready(function () {
     
    //         $(".password-eye").on("click", function () {
    //     var targetId = $(this).data("target");
    //     var targetField = $("#" + targetId);
    //     var fieldType = targetField.attr("type");

    //     if (fieldType === "password") {
    //         targetField.attr("type", "text");
    //     } else {
    //         targetField.attr("type", "password");
    //     }
    // });
     
    //      $("#button").on('click', function (event) {

    //         $('#sucess_message').hide();
    //         $("#passwordError").text("");
           
      
    //         event.preventDefault();
       
    //          var password = $("#password").val();
    //          var re_password = $("#re-password").val();
     
       
     
    //     if (password.length < 6) {
    //         $("#passwordError").text("Password must be at least 6 characters").show();
           
    //     }

    //    else if (password !== re_password) {
    //         $("#rePasswordError").text("Passwords do not match").show();
            
    //     }else{

        
     
   
     
                         
    //                      $.ajax({
    //                          type: 'POST',
    //                          dataType: "json",
    //                          data: { password:password,re_password:re_password },
    //                          url: '/employees/updatepassword',
    //                          success: function (response) {
    //                              if (response.status == 'Sucessfully Updated') {
                                    
    //                                 $('#sucess_message').text(response.status);
    //                                 $('#sucess_message').show()
    //                                  $("#password").val('');
    //                                  $("#re-password").val('');
    //                                  setTimeout(function () {
    //                                     $('#sucess_message').hide();
    //                                 }, 3000); 
    //                              } else {
                                     
    //                                 $('#sucess_message').text(response.status);
                                     
    //                              }
    //                          },
    //                          error: function (xhr, status, error) {
    //                              console.log("AJAX Error:", error);
    //                          }
    //                      });
    //                     }
     
                     
                    
                 
                 
    //              });
    //          });
             
             </script>   -->
    
    <!-- Vendor js -->
    <script src="/assets/js/vendor.min.js"></script>

    <!-- Daterangepicker js -->
    <script src="/assets/vendor/daterangepicker/moment.min.js"></script>
    <script src="/assets/vendor/daterangepicker/daterangepicker.js"></script>
    
    <!-- Apex Charts js -->
    <script src="/assets/vendor/apexcharts/apexcharts.min.js"></script>

    <!-- Vector Map js -->
    <script src="/assets/vendor/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="/assets/vendor/admin-resources/jquery.vectormap/maps/jquery-jvectormap-world-mill-en.js"></script>

    <!-- Dashboard App js -->
    <script src="/assets/js/pages/dashboard.js"></script>


    <!-- App js -->
    <script src="/assets/js/app.min.js"></script>

</body>
</html> 